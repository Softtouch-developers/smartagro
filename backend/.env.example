# =============================================================================
# SmartAgro Backend - Environment Variables Template
# =============================================================================
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in all values (no brackets, no quotes unless specified)
# 3. Never commit .env to git!
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION CONFIGURATION
# -----------------------------------------------------------------------------
APP_NAME=SmartAgro
ENVIRONMENT=development  # Options: development, staging, production
DEBUG=True
SECRET_KEY=your-super-secret-key-change-this-in-production  # Generate with: openssl rand -hex 32

# -----------------------------------------------------------------------------
# DATABASE CONNECTIONS
# -----------------------------------------------------------------------------

# PostgreSQL (Primary Database)
# Format: postgresql://username:password@host:port/database
# Local (with docker-compose): postgresql://smartagro:smartagro_password@localhost:5433/smartagro_dev
# Local (native postgres): postgresql://localhost/smartagro_dev
# Production: ${db.DATABASE_URL} (auto-injected by DO)
DATABASE_URL=postgresql://smartagro:smartagro_password@localhost:5433/smartagro_dev

# MongoDB (Document Store)
# Local: mongodb://localhost:27017/smartagro
# Atlas: mongodb+srv://username:password@cluster.mongodb.net/smartagro
MONGODB_URI=mongodb://localhost:27017/smartagro

# Redis (Cache & Sessions)
# Local: redis://localhost:6379/0
# Production: ${redis.REDIS_URL} (auto-injected by DO)
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# EXTERNAL API KEYS
# -----------------------------------------------------------------------------

# Paystack (Payment Processing)
# Get from: https://dashboard.paystack.com/#/settings/developers
# Test keys start with: sk_test_ and pk_test_
# Live keys start with: sk_live_ and pk_live_
PAYSTACK_SECRET_KEY=sk_test_your_secret_key_here
PAYSTACK_PUBLIC_KEY=pk_test_your_public_key_here

# mNotify (SMS/OTP Service)
# Get from: https://apps.mnotify.net/smsapi
MNOTIFY_API_KEY=your_mnotify_api_key_here

# OpenRouter (LLM for AI Agent)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-your_openrouter_key_here

# OpenWeatherMap (Weather Data)
# Get from: https://openweathermap.org/api
OPENWEATHER_API_KEY=your_openweather_key_here

# OpenRouter (for embeddings - pgvector)
EMBEDDING_MODEL=your_embedding_model_here


# -----------------------------------------------------------------------------
# DIGITALOCEAN SPACES (Object Storage)
# -----------------------------------------------------------------------------

# Get from: DO Dashboard → API → Spaces Keys
SPACES_ACCESS_KEY=your_spaces_access_key
SPACES_SECRET_KEY=your_spaces_secret_key
SPACES_BUCKET=smartagro-media
SPACES_REGION=sgp1  # Options: nyc3, sfo3, sgp1, fra1, ams3
SPACES_ENDPOINT=https://sgp1.digitaloceanspaces.com

# CDN URL (auto-generated after creating Space)
SPACES_CDN_URL=https://smartagro-media.sgp1.cdn.digitaloceanspaces.com

# -----------------------------------------------------------------------------
# JWT CONFIGURATION
# -----------------------------------------------------------------------------

# Generate a strong secret: openssl rand -hex 32
JWT_SECRET_KEY=your-jwt-secret-key-different-from-app-secret
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60  # 1 hour
REFRESH_TOKEN_EXPIRE_DAYS=7  # 7 days

# -----------------------------------------------------------------------------
# FRONTEND CONFIGURATION (for CORS)
# -----------------------------------------------------------------------------

# Local development
FRONTEND_URL=http://localhost:3000

# Production (update when deployed)
# FRONTEND_URL=https://smartagro-xxxxx.ondigitalocean.app

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------

RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60  # Global rate limit
AUTH_RATE_LIMIT_PER_MINUTE=5  # Stricter for auth endpoints

# -----------------------------------------------------------------------------
# ESCROW & PAYMENT CONFIGURATION
# -----------------------------------------------------------------------------

PLATFORM_FEE_PERCENTAGE=5  # 5% platform fee
AUTO_RELEASE_DAYS=7  # Auto-release escrow after 7 days
DISPUTE_DEADLINE_DAYS=3  # Buyer can dispute within 3 days

# -----------------------------------------------------------------------------
# OTP CONFIGURATION
# -----------------------------------------------------------------------------

OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=3
OTP_LENGTH=6

# -----------------------------------------------------------------------------
# FILE UPLOAD LIMITS
# -----------------------------------------------------------------------------

MAX_IMAGE_SIZE_MB=10
MAX_VOICE_NOTE_SIZE_MB=10
MAX_DOCUMENT_SIZE_MB=20

# -----------------------------------------------------------------------------
# AI AGENT CONFIGURATION
# -----------------------------------------------------------------------------

AGENT_MODEL=google/gemini-2.5-flash-preview-09-2025  # OpenRouter model identifier
AGENT_TEMPERATURE=0.7
AGENT_MAX_TOKENS=5000

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------

LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=app.log

# -----------------------------------------------------------------------------
# BACKGROUND JOBS
# -----------------------------------------------------------------------------

ENABLE_BACKGROUND_JOBS=True
AUTO_RELEASE_JOB_INTERVAL_HOURS=6
CLEANUP_JOB_HOUR=3  # Run at 3 AM daily

# -----------------------------------------------------------------------------
# DEVELOPMENT FLAGS (Set to False in production)
# -----------------------------------------------------------------------------

MOCK_SMS=False  # If True, log SMS instead of sending
MOCK_PAYMENTS=False  # If True, bypass actual Paystack calls
SEED_DATABASE=False  # If True, seed with test data on startup

# -----------------------------------------------------------------------------
# PRODUCTION ONLY (Set by DigitalOcean automatically)
# -----------------------------------------------------------------------------

# PORT=${PORT}  # DO sets this automatically
# DATABASE_URL=${db.DATABASE_URL}  # DO injects this
# REDIS_URL=${redis.REDIS_URL}  # DO injects this

# =============================================================================
# SECURITY NOTES:
# - Never commit .env to version control
# - Use different secrets for dev/staging/production
# - Rotate secrets regularly
# - Use strong, unique passwords
# - Keep test keys separate from live keys
# =============================================================================
